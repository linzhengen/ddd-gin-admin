// Code generated by Wire. DO NOT EDIT.

//go:generate go run github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package injector

import (
	"github.com/linzhengen/ddd-gin-admin/application"
	"github.com/linzhengen/ddd-gin-admin/infrastructure/casbin"
	"github.com/linzhengen/ddd-gin-admin/infrastructure/persistence"
	"github.com/linzhengen/ddd-gin-admin/injector/api"
	"github.com/linzhengen/ddd-gin-admin/interfaces/api/handler"
	"github.com/linzhengen/ddd-gin-admin/interfaces/api/router"
)

import (
	_ "github.com/linzhengen/ddd-gin-admin/interfaces/api/swagger"
)

// Injectors from wire.go:

func BuildApiInjector() (*api.Injector, func(), error) {
	author, cleanup, err := api.InitAuth()
	if err != nil {
		return nil, nil, err
	}
	db, cleanup2, err := api.InitGormDB()
	if err != nil {
		cleanup()
		return nil, nil, err
	}
	roleRepository := persistence.NewRole(db)
	roleMenuRepository := persistence.NewRoleMenu(db)
	menuActionResourceRepository := persistence.NewMenuActionResource(db)
	userRepository := persistence.NewUser(db)
	userRoleRepository := persistence.NewUserRole(db)
	adapter := casbin.NewCasbinAdapter(roleRepository, roleMenuRepository, menuActionResourceRepository, userRepository, userRoleRepository)
	syncedEnforcer, cleanup3, err := api.InitCasbin(adapter)
	if err != nil {
		cleanup2()
		cleanup()
		return nil, nil, err
	}
	menuRepository := persistence.NewMenu(db)
	menuActionRepository := persistence.NewMenuAction(db)
	login := application.NewLogin(author, userRepository, userRoleRepository, roleRepository, roleMenuRepository, menuRepository, menuActionRepository)
	handlerLogin := handler.NewLogin(login)
	transRepository := persistence.NewTrans(db)
	menu := application.NewMenu(transRepository, menuRepository, menuActionRepository, menuActionResourceRepository)
	handlerMenu := handler.NewMenu(menu)
	role := application.NewRole(syncedEnforcer, transRepository, roleRepository, roleMenuRepository, userRepository)
	handlerRole := handler.NewRole(role)
	user := application.NewUser(syncedEnforcer, transRepository, userRepository, userRoleRepository, roleRepository)
	handlerUser := handler.NewUser(user)
	healthCheck := handler.NewHealthCheck()
	routerRouter := router.NewRouter(author, syncedEnforcer, handlerLogin, handlerMenu, handlerRole, handlerUser, healthCheck)
	engine := api.InitGinEngine(routerRouter)
	injector := api.NewInjector(engine, author, syncedEnforcer, menu)
	return injector, func() {
		cleanup3()
		cleanup2()
		cleanup()
	}, nil
}
